{"version":3,"file":"js/234.a83c81ef.js","mappings":"8JAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACA,EAAG,KAAK,CAACF,EAAII,GAAG,UAAUF,EAAG,MAAM,CAACG,YAAY,aAAa,CAACH,EAAG,MAAM,CAACI,IAAI,SAASD,YAAY,aAAaE,MAAM,CAAC,IAAMC,EAAQ,MAA4B,IAAM,MAAMR,EAAIS,GAAG,KAAKP,EAAG,SAAS,CAACQ,GAAG,CAAC,MAAQV,EAAIW,SAAS,CAACX,EAAII,GAAG,WAClT,EACIQ,EAAkB,CAAC,WAAY,IAAIZ,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACG,YAAY,UAAU,CAACH,EAAG,MAAM,CAACG,YAAY,aAC9H,GCWA,GACAQ,KAAAA,aACAC,OACA,OACAC,OAAAA,EACAC,YAAAA,EACAC,MAAAA,EACAC,YAAAA,EAEA,EACA,sBACA,iBACA,kCACA,oBACA,OACA,kCAIA,aAEAC,EAAAA,YAAAA,EAAAA,OAAAA,IAAAA,EAAAA,OAAAA,IAAAA,EACAC,QAAAA,IAAAA,GAAAA,EAAAA,aACAC,EAAAA,MAAAA,WAAAA,kBACAA,EAAAA,MAAAA,UAAAA,UAAAA,EAAAA,kBACAC,MAAAA,SAAAA,EAAAA,EAAAA,MAAAA,QACAH,EAAAA,YAAAA,CACA,CAVAE,EAAAA,iBAAAA,EAAAA,GAAAA,EAWA,EACAE,QAAAA,CACAC,QACA,oDACA,6DACA,EACAb,SACA,mBAEA,YADAS,QAAAA,IAAAA,SAIA,mBAMA,UACA,yBAEA,aAEA,+BAEA,wBAGA,8BACAA,QAAAA,IAAAA,GAAAA,KAAAA,QAEA,YACA,EAEAK,UAAAA,GACA,WACA,iCACA,EACAC,aAAAA,EAAAA,GAKA,OAHAC,EAAAA,KAAAA,KAAAA,GAEAC,EAAAA,KAAAA,MAAAA,GACA,iCACA,EAEAC,uBACA,qCACAC,EAAAA,CACA,2BACA,6BACA,8BACA,wCAEA,eACA,uBACA,YAGAC,EAAAA,IACA,ICtGkR,I,UCQ9QC,GAAY,OACd,EACAjC,EACAa,GACA,EACA,KACA,KACA,MAIF,EAAeoB,EAAiB,O","sources":["webpack://test_dome/./src/views/home.vue","webpack://test_dome/src/views/home.vue","webpack://test_dome/./src/views/home.vue?a8eb","webpack://test_dome/./src/views/home.vue?dafd"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('h3',[_vm._v(\"转盘抽奖\")]),_c('div',{staticClass:\"round_box\"},[_c('img',{ref:\"rotImg\",staticClass:\"img_rotate\",attrs:{\"src\":require(\"../images/img_index6.png\"),\"alt\":\"\"}}),_vm._m(0)]),_c('button',{on:{\"click\":_vm.toDraw}},[_vm._v(\"点击抽奖\")])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"center\"},[_c('div',{staticClass:\"pointer\"})])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n <div>\r\n <h3>转盘抽奖</h3>\r\n <div class=\"round_box\" >\r\n  <img class=\"img_rotate\" ref=\"rotImg\" src=\"../images/img_index6.png\" alt=\"\">\r\n  <div class=\"center\">\r\n  <div class=\"pointer\" ></div>\r\n  </div>\r\n </div>\r\n <button @click=\"toDraw\" >点击抽奖</button>\r\n </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n name:'rotaryDraw',\r\n data() {\r\n return {\r\n  rotate: 0,\r\n  resetRotate: 0,// 旋转角度\r\n  hitId: 1,// 1-4   下标\r\n  drawStatus: false\r\n }\r\n },\r\n async mounted() {\r\n await this.$nextTick();\r\n let evenTransition = this.whichTransitionEvent();\r\n let img = this.$refs.rotImg;\r\n let that = this;\r\n const hitAre = [ '天柱星','天冲星','天英星','天蓬星'];\r\n // 监听 动画结束 \r\n img.addEventListener(evenTransition,tranHand,false);\r\n\r\n function tranHand() {\r\n  // 复位\r\n  that.resetRotate = that.rotate > 360 ? that.rotate % 360 : 0;\r\n  console.log(37,that.resetRotate);\r\n  img.style.transition = \"none 0s ease 0s\";\r\n  img.style.transform = `rotate(${that.resetRotate}deg)`; \r\n  alert(`抽奖结果【 ${hitAre[that.hitId - 1]} 】`);\r\n  that.drawStatus = false\r\n }\r\n },\r\n methods: {\r\n start() {\r\n  this.$refs.rotImg.style.transition = \"all 3s ease 0s\";\r\n  this.$refs.rotImg.style.transform = `rotate(${this.rotate}deg)`;\r\n },\r\n toDraw() {\r\n  if(this.drawStatus){\r\n  console.log('正在抽奖中');\r\n  return\r\n  }\r\n  // 标记状态\r\n  this.drawStatus = true\r\n  /**\r\n  * 圆盘共 10 份 每份 36度, 停位置(id)度数 (id - 1)*36 \r\n  * 基数 3圈 360*4\r\n  * this.rotate 当前角度\r\n  * **/ \r\n  let reset = 360;\r\n  let idx = this.getRandomInt(1,4);\r\n  // 设置命中\r\n  this.hitId = idx;\r\n//   // 需要多转角度\r\n  let addRotate = this.resetRotate > 0 ? 360-45 : 0;\r\n//   // 总共角度\r\n  let allRotate = this.rotate + (idx - 1) + reset + addRotate;\r\n// let allRotate=360 + 45\r\n  // 角度限制\r\n  this.rotate = this.setRotate(allRotate);\r\n  console.log(71,this.rotate);\r\n\r\n  this.start()\r\n },\r\n // 递归计算角度 不超过 360*6\r\n setRotate(deg) {\r\n  let rest = deg - (360/8);\r\n  return rest > 1305? this.setRotate(rest) : deg;\r\n },\r\n getRandomInt(min, max) {\r\n  // 向上收\r\n  min = Math.ceil(min);\r\n  // 向下收\r\n  max = Math.floor(max);\r\n  return Math.floor(Math.random() * (max - min)) + min; //不含最大值，含最小值\r\n },\r\n // 动画兼容\r\n whichTransitionEvent(){\r\n  let el = document.createElement('span'),\r\n  transitions = {\r\n  'transition':'transitionend',\r\n  'OTransition':'oTransitionEnd',\r\n  'MozTransition':'transitionend',\r\n  'WebkitTransition':'webkitTransitionEnd'\r\n  };\r\n  for(let t in transitions){\r\n  if( el.style[t] !== undefined ){\r\n   return transitions[t];\r\n  }\r\n  }\r\n  el = null;\r\n }\r\n }\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" >\r\n.img_rotate{\r\n transform: rotate(0deg);\r\n}\r\n.round_box{\r\n width: 100%;\r\n max-width: 375px;\r\n position: relative;\r\n overflow: hidden;\r\n img{\r\n width: 100%;\r\n }\r\n .center{\r\n position: absolute;\r\n top: 50%;\r\n left: 50%;\r\n transform: translate(-50%,-50%);\r\n .pointer{\r\n  width: 5px;\r\n  height: 90px;\r\n  background-color: #f40;\r\n  position: absolute;\r\n  top: -90px;\r\n }\r\n .pointer::before{\r\n  content:'';\r\n  width: 0;\r\n  height: 0;\r\n  border-top: 15px solid transparent;\r\n  border-right: 15px solid transparent;\r\n  border-bottom: 15px solid #f40;\r\n  border-left: 15px solid transparent;\r\n  position: absolute;\r\n  top: -20px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n }\r\n }\r\n}\r\n\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./home.vue?vue&type=template&id=75c8640a&\"\nimport script from \"./home.vue?vue&type=script&lang=js&\"\nexport * from \"./home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./home.vue?vue&type=style&index=0&id=75c8640a&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","_v","staticClass","ref","attrs","require","_m","on","toDraw","staticRenderFns","name","data","rotate","resetRotate","hitId","drawStatus","that","console","img","alert","methods","start","setRotate","getRandomInt","min","max","whichTransitionEvent","transitions","el","component"],"sourceRoot":""}